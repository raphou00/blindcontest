(()=>{"use strict";var e={347:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ze});var n=r(6792),o=r(7602),i=r(885),l=r(5004),a=r(519),s=r(1218);r(5682);const u=(0,s.createClient)("https://dhnvcwntyfjpzhzdelht.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRobnZjd250eWZqcHpoemRlbGh0Iiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTY0OTAxNDUsImV4cCI6MjAxMjA2NjE0NX0.EbfxrScGQ_Rp58UzZAZQB2TwJqh224J6XoFgQ1j9uFw",{auth:{storage:a.default,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1}});var d=r(2629),c=(0,l.createContext)({}),f=function(){return(0,l.useContext)(c)};const h=function(e){var t=e.children,r=(0,l.useState)(null),n=(0,i.default)(r,2),o=n[0],a=n[1];return(0,l.useEffect)((function(){var e=u.auth.onAuthStateChange((function(e,t){a(t?t.user:null)})).data.subscription;return function(){e.unsubscribe()}}),[]),(0,d.jsx)(c.Provider,{value:{user:o},children:t})};var p=r(5705),g=r(925),y=r(4855),b=r(7163),m=r(4942),x=r(9385),j=r(1054),O=r(3287),v=r(1331),w=r(4257);function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){(0,m.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function T(e){var t=e.children,r=(0,l.useRef)(new w.default.Value(0)).current;return(0,l.useEffect)((function(){w.default.timing(r,{toValue:1,duration:500,useNativeDriver:!1}).start()}),[]),(0,d.jsx)(w.default.View,{style:C(C({},S.container),{},{opacity:r}),children:t})}var S=n.default.create({container:{flex:1,justifyContent:"center",alignItems:"center",paddingTop:10}});const P=n.default.create({input:{width:300,paddingTop:10,paddingRight:10,paddingBottom:10,paddingLeft:10,textAlign:"center",borderRadius:6,borderWidth:1,borderColor:"slateblue",backgroundColor:"#111111",color:"#FFFFFF",fontWeight:"bold",shadowOffset:{width:3,height:3},shadowRadius:6,shadowColor:"#000",shadowOpacity:1},button:{borderRadius:6,borderWidth:1,borderColor:"#111111",shadowOffset:{width:3,height:3},shadowRadius:6,shadowColor:"#000",shadowOpacity:1,padding:6,backgroundColor:"slateblue",textAlign:"center"},buttonText:{textAlign:"center",fontSize:18,fontWeight:"bold",color:"#FFFFFF"}});function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){(0,m.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function B(){var e=f().user;return(0,d.jsxs)(T,{children:[(0,d.jsx)(O.default,{style:D.homeImg,source:r(3350)}),(0,d.jsx)(j.default,{style:D.homeTitle,children:"blindcontest"}),(0,d.jsxs)(x.default,{style:D.homeButtons,children:[(0,d.jsx)(v.default,{to:"/join",children:(0,d.jsx)(x.default,{style:I(I({},P.button),{},{width:300}),children:(0,d.jsx)(j.default,{style:P.buttonText,children:"Rejoindre une partie"})})}),(0,d.jsx)(v.default,{to:"/create",children:(0,d.jsx)(x.default,{style:I(I({},P.button),{},{width:300}),children:(0,d.jsx)(j.default,{style:P.buttonText,children:"Cr\xe9er une partie"})})}),(0,d.jsx)(v.default,{to:"/auth",children:(0,d.jsx)(x.default,{style:I(I({},P.button),{},{width:300}),children:(0,d.jsx)(j.default,{style:P.buttonText,children:e?"Profil":"Connexion"})})})]})]})}var D=n.default.create({homeImg:{height:200,width:200},homeTitle:{width:300,fontSize:32,textTransform:"uppercase",fontWeight:"bold",textAlign:"center",color:"slateblue"},homeButtons:{width:300,gap:10,marginTop:30}}),R=r(6591),W=r(5326),z=r(3624);const E=(0,r(456).default)("https://162.19.243.4:3000");var A=r(3224);function L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?L(Object(r),!0).forEach((function(t){(0,m.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):L(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e){var t=e.id,r=e.name,n=e.image,o=e.activeCategories,a=e.setActiveCategories,s=(0,l.useState)(!1),u=(0,i.default)(s,2),c=u[0],f=u[1];return(0,d.jsx)(W.default,{style:{width:130},onPress:function(){a((function(e){return e.includes(t)?e.splice(e.indexOf(t),1):e.push(t),f(o.includes(t)),e}))},children:(0,d.jsxs)(x.default,{style:N(N({},J.categoryCard),{},{borderColor:c?"#535bf2":"#FFFFFF"}),children:[(0,d.jsx)(O.default,{style:J.categoryCardImg,source:{uri:n}}),(0,d.jsx)(j.default,{style:J.categoryCardName,children:r})]})})}function M(e){var t=e.activeCategories,r=e.setActiveCategories,n=(0,l.useState)([]),o=(0,i.default)(n,2),a=o[0],s=o[1];return(0,l.useEffect)((function(){E.emit("categories");E.on("categories",(function(e){return s(e.categories)}))}),[]),(0,d.jsx)(A.default,{style:J.categoryContainer,children:a.map((function(e){return(0,d.jsx)(_,{id:e.id,name:e.name,image:e.icons[0].url,activeCategories:t,setActiveCategories:r},e.id)}))})}var J=n.default.create({categoryContainer:{height:250,width:290,overflow:"scroll",display:"flex",flexDirection:"row",flexWrap:"wrap"},categoryCard:{height:100,width:275,borderRadius:6,borderWidth:2,display:"flex",alignItems:"center",justifyContent:"center",margin:5},categoryCardImg:{height:50,width:50,borderRadius:6},categoryCardName:{color:"#FFFFFF",fontWeight:"bold",fontSize:16}});function V(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?V(Object(r),!0).forEach((function(t){(0,m.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Z(e){var t=e.navigation,r=(0,l.useState)([]),n=(0,i.default)(r,2),o=n[0],a=n[1],s=(0,l.useState)(""),u=(0,i.default)(s,2),c=u[0],f=u[1],h=(0,l.useState)("20"),p=(0,i.default)(h,2),g=p[0],y=p[1],b=(0,l.useState)("10"),m=(0,i.default)(b,2),O=m[0],v=m[1];(0,l.useEffect)((function(){E.emit("create_room"),E.on("create_room",(function(e){return f(e.key)}))}),[t]);return(0,d.jsxs)(T,{children:[(0,d.jsxs)(j.default,{style:q.createTitle,children:["Cl\xe9 ",(0,d.jsx)(j.default,{style:U(U({},q.createTitle),{},{color:"slateblue"}),children:c})]}),(0,d.jsxs)(x.default,{style:q.createBox,children:[(0,d.jsx)(j.default,{style:q.createBoxTitle,children:"Cat\xe9gories"}),(0,d.jsx)(M,{activeCategories:o,setActiveCategories:a})]}),(0,d.jsxs)(x.default,{style:q.createBox,children:[(0,d.jsx)(j.default,{style:q.createBoxTitle,children:"Temps pour r\xe9pondre (sec)"}),(0,d.jsx)(R.default,{style:[P.input,q.createInput],value:g,onChangeText:y,inputMode:"numeric"})]}),(0,d.jsxs)(x.default,{style:q.createBox,children:[(0,d.jsx)(j.default,{style:q.createBoxTitle,children:"Nombre de musiques"}),(0,d.jsx)(R.default,{style:[P.input,q.createInput],value:O,onChangeText:v,inputMode:"numeric"})]}),(0,d.jsx)(W.default,{onPress:function(){var e=Number.parseInt(g),r=Number.parseInt(O);isNaN(e)||isNaN(r)?z.default.alert("Entrez des valeurs valides"):E.emit("update_room",{key:c,time:e,nbrQuestions:r,categories:o},(function(){return t.navigate("lobby",{room:c,host:!0})}))},children:(0,d.jsx)(x.default,{style:[P.button,q.createButton],children:(0,d.jsx)(j.default,{style:P.buttonText,children:"Cr\xe9er et rejoindre"})})})]})}var q=n.default.create({createTitle:{fontSize:25,fontWeight:"bold",color:"#FFFFFF",marginBottom:10,textDecorationLine:"underline",textDecorationStyle:"solid"},createPlayers:{display:"flex",alignItems:"center",justifyContent:"center",height:"50%",width:300,borderWidth:2,borderColor:"slateblue",borderStyle:"solid",borderTopLeftRadius:6,borderTopRightRadius:6,borderBottomRightRadius:6,borderBottomLeftRadius:6,overflow:"hidden"},createPlayersTitle:{width:"100%",height:40,borderBottomWidth:3,borderColor:"slateblue",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row",gap:10},createPlayersTitleText:{textTransform:"uppercase",fontSize:22,fontWeight:"bold",textAlign:"right",color:"#FFFFFF"},createPlayersTitleNbr:{fontSize:16,fontWeight:"bold",color:"slateblue"},createPlayersList:{overflowY:"scroll",width:"100%",height:400},createPlayersListName:{width:"90%",marginTop:0,marginRight:"auto",marginBottom:0,marginLeft:"auto",borderBottomWidth:1,borderColor:"slateblue",textAlign:"center",fontSize:18,fontWeight:"bold",paddingTop:5,paddingRight:0,paddingBottom:5,paddingLeft:0,color:"#FFFFFF"},createBox:{width:300,height:"auto",borderWidth:2,borderRadius:6,borderStyle:"solid",borderColor:"slateblue",backgroundColor:"#111111",padding:5,marginTop:20},createBoxTitle:{fontSize:20,fontWeight:"bold",color:"#FFFFFF",margin:5},createInput:{width:285},createButton:{marginTop:20,width:300}}),Y=r(5861);function Q(e){var t=e.navigation,n=(0,l.useState)(""),o=(0,i.default)(n,2),a=o[0],s=o[1],u=function(){var e=(0,Y.default)((function*(){a?(E.emit("check_key",{room:a}),E.on("check_key",(function(e){e.access?t.navigate("lobby",{room:a,host:!1}):z.default.alert("Vous ne pouvez pas rejoindre cette partie")}))):z.default.alert("Veuillez entrer une cl\xe9")}));return function(){return e.apply(this,arguments)}}();return(0,d.jsxs)(T,{children:[(0,d.jsx)(O.default,{style:X.homeImg,source:r(3350)}),(0,d.jsx)(j.default,{style:X.homeTitle,children:"Rejoindre"}),(0,d.jsxs)(x.default,{style:X.homeButtons,children:[(0,d.jsx)(R.default,{style:P.input,value:a,onChangeText:s,inputMode:"search",onSubmitEditing:u,placeholder:"Cl\xe9..."}),(0,d.jsx)(W.default,{style:P.button,onPress:u,children:(0,d.jsx)(j.default,{style:P.buttonText,children:"Rejoindre la partie"})})]})]})}var X=n.default.create({homeImg:{height:200,width:200},homeTitle:{width:300,fontSize:32,textTransform:"uppercase",fontWeight:"bold",textAlign:"center",color:"slateblue"},homeButtons:{width:300,gap:10,marginTop:30}});function G(e){var t=e.players;return(0,d.jsxs)(x.default,{style:H.players,children:[(0,d.jsx)(x.default,{style:H.playersTitle,children:(0,d.jsxs)(j.default,{style:H.playersTitleText,children:["joueurs (",t.length,")"]})}),(0,d.jsx)(x.default,{style:H.playersList,children:0===t.length?(0,d.jsx)(j.default,{style:H.playersListNoPlayer,children:"Aucun joueur pour le moment"}):t.map((function(e){return(0,d.jsx)(j.default,{style:H.playersListName,children:e.name},e.id)}))})]})}var H=n.default.create({players:{backgroundColor:"#111111",display:"flex",alignItems:"center",justifyContent:"center",height:"50%",width:300,borderWidth:2,borderStyle:"solid",borderColor:"slateblue",borderTopLeftRadius:6,borderTopRightRadius:6,borderBottomRightRadius:6,borderBottomLeftRadius:6,overflow:"hidden"},playersTitle:{width:"100%",height:"10%",borderBottomWidth:3,borderColor:"slateblue",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row"},playersTitleText:{display:"flex",textTransform:"uppercase",fontSize:20,fontWeight:"bold",color:"#FFFFFF"},playersTitleNbr:{paddingLeft:10,fontSize:16,fontWeight:"bold",color:"slateblue"},playersList:{overflowY:"scroll",width:"100%",height:"90%"},playersListNoPlayer:{width:"100%",height:30,color:"#FFFFFF",fontWeight:"bold",padding:5,textAlign:"center"},playersListName:{width:"90%",marginTop:0,marginRight:"auto",marginBottom:0,marginLeft:"auto",borderBottomWidth:1,borderColor:"slateblue",textAlign:"center",fontSize:18,fontWeight:"bold",paddingTop:5,paddingRight:0,paddingBottom:5,paddingLeft:0,color:"#FFFFFF"}});function $(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function K(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?$(Object(r),!0).forEach((function(t){(0,m.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ee(e){var t=e.navigation,r=e.route,n=(0,l.useState)(""),o=(0,i.default)(n,2),a=o[0],s=o[1],u=(0,l.useState)(!1),c=(0,i.default)(u,2),f=c[0],h=c[1],p=(0,l.useState)([]),g=(0,i.default)(p,2),y=g[0],b=g[1],m=r.params,O=m.room,v=m.host;(0,l.useEffect)((function(){E.emit("join_lobby",{room:O}),E.emit("players",{room:O}),E.on("players",(function(e){return b(e.players)})),E.on("start_room",(function(){return t.navigate("game",{room:O,host:v,name:a})}))}),[]);return(0,d.jsxs)(T,{children:[(0,d.jsxs)(j.default,{style:te.lobbyTitle,children:["Cl\xe9 ",(0,d.jsx)(j.default,{style:K(K({},te.lobbyTitle),{},{color:"slateblue"}),children:O})]}),(0,d.jsx)(x.default,{style:te.lobbyName,children:(0,d.jsxs)(x.default,{style:te.lobbyNameBox,children:[(0,d.jsx)(R.default,{style:P.input,onChangeText:s,value:a,placeholder:"Batman..."}),(0,d.jsx)(W.default,{style:K(K({},P.button),{},{backgroundColor:f?"grey":P.button.backgroundColor}),onPress:function(){y.map((function(e){return e.name})).includes(a)?z.default.alert("Nom d\xe9j\xe0 dans la liste"):a.length<3?z.default.alert("Nom trop court"):(h(!0),E.emit("join_room",{room:O,name:a}))},disabled:f,children:(0,d.jsx)(j.default,{style:P.buttonText,children:"Valider"})})]})}),(0,d.jsx)(G,{players:y}),v&&(0,d.jsx)(W.default,{style:K(K({},P.button),{},{width:300,marginTop:30,backgroundColor:f?P.button.backgroundColor:"grey"}),disabled:!f,onPress:function(){E.emit("start_room")},children:(0,d.jsx)(j.default,{style:P.buttonText,children:"Jouer"})})]})}var te=n.default.create({lobbyTitle:{fontSize:25,fontWeight:"bold",color:"#FFFFFF",marginBottom:30,textDecorationLine:"underline",textDecorationStyle:"solid"},lobbyName:{display:"flex",flexDirection:"column",alignItems:"center",width:300},lobbyNameBox:{gap:10,marginBottom:30}}),re=r(7683),ne=r(1667).default.create({baseURL:"https://api.spotify.com/v1/"});E.emit("token"),E.on("token",(function(e){ne.defaults.headers.Authorization=e.token}));var oe=function(){var e=(0,Y.default)((function*(e){var t=[];return(yield ne.get(`search?q=${e}&type=track&limit=5`)).data.tracks.items.map((function(e){t.push({id:e.id,title:e.name,artists:e.artists.map((function(e){return e.name})),image:e.album.images[0].url})})),t}));return function(t){return e.apply(this,arguments)}}();function ie(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function le(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(r),!0).forEach((function(t){(0,m.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ie(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ae(e){var t=e.song,r=e.answered,n=e.setAnswered,o=e.setMyAnswer,i=e.setCorrect,l=t.id,a=t.title,s=t.artists,u=t.image;return(0,d.jsx)(W.default,{onPress:function(){n&&(o(t),E.emit("answer_room",{id:l},(function(e){n(!0),i(e.correct)})))},children:(0,d.jsxs)(x.default,{style:le(le({},se.song),{},{backgroundColor:r?"grey":"#111111"}),children:[(0,d.jsx)(O.default,{style:se.songImg,source:{uri:u}}),(0,d.jsxs)(x.default,{style:se.songText,children:[(0,d.jsx)(j.default,{style:se.songTitle,children:a}),(0,d.jsx)(j.default,{style:se.songArtist,children:s.join(", ")})]})]})})}var se=n.default.create({song:{padding:5,height:50,width:285,borderWidth:2,borderStyle:"solid",borderColor:"slateblue",borderRadius:6,display:"flex",flexDirection:"row",overflow:"hidden"},songImg:{height:36,width:36,borderRadius:6},songText:{display:"flex",flexDirection:"column",height:36,width:500,marginLeft:10},songTitle:{height:20,fontSize:16,fontWeight:"bold",color:"#FFFFFF",overflow:"hidden"},songArtist:{height:16,fontSize:14,color:"#CCC",overflow:"hidden"}});function ue(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function de(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ue(Object(r),!0).forEach((function(t){(0,m.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ue(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ce(e){var t=e.players,r=e.visible;return(0,d.jsxs)(x.default,{style:de(de({},fe.ranking),{},{display:r?"flex":"none"}),children:[(0,d.jsx)(x.default,{style:fe.rankingTitle,children:(0,d.jsxs)(j.default,{style:fe.rankingTitleText,children:["classement (",t.length,")"]})}),(0,d.jsx)(x.default,{style:fe.rankingList,children:t.map((function(e){return(0,d.jsxs)(j.default,{style:fe.rankingListName,children:[e.name," - ",e.point]},e.id)}))})]})}var fe=n.default.create({ranking:{width:300,height:500,borderStyle:"solid",borderWidth:2,borderColor:"slateblue",borderRadius:6,backgroundColor:"#111111"},rankingTitle:{width:"100%",height:"10%",borderBottomWidth:3,borderColor:"slateblue",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"row"},rankingTitleText:{display:"flex",textTransform:"uppercase",fontSize:20,fontWeight:"bold",color:"#FFFFFF"},rankingTitleNbr:{paddingLeft:10,fontSize:16,fontWeight:"bold",color:"slateblue"},rankingList:{overflowY:"scroll",width:"100%",height:"90%"},rankingListNoPlayer:{width:"100%",height:30,color:"#FFFFFF",fontWeight:"bold",padding:5,textAlign:"center"},rankingListName:{width:"90%",marginTop:0,marginRight:"auto",marginBottom:0,marginLeft:"auto",borderBottomWidth:1,borderColor:"slateblue",textAlign:"center",fontSize:18,fontWeight:"bold",paddingTop:5,paddingRight:0,paddingBottom:5,paddingLeft:0,color:"#FFFFFF"}});function he(e){var t=e.nbr,r=e.play,n=(0,l.useState)(t),o=(0,i.default)(n,2),a=o[0],s=o[1],u=(0,l.useState)(null),c=(0,i.default)(u,2),f=c[0],h=c[1];return(0,l.useEffect)((function(){return r?(s(t),h(setInterval((function(){return s((function(e){return e-1}))}),1e3))):clearInterval(f),function(){clearInterval(f)}}),[r]),(0,d.jsx)(d.Fragment,{children:a})}function pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ge(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(r),!0).forEach((function(t){(0,m.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var ye=new re.Sound;function be(e){var t=e.navigation,n=e.route,o=(0,l.useState)([]),a=(0,i.default)(o,2),s=a[0],u=a[1],c=(0,l.useState)([]),f=(0,i.default)(c,2),h=f[0],p=f[1],g=(0,l.useState)(null),y=(0,i.default)(g,2),b=y[0],m=y[1],v=(0,l.useState)(null),w=(0,i.default)(v,2),F=w[0],C=w[1],S=(0,l.useState)(""),k=(0,i.default)(S,2),I=k[0],B=k[1],D=(0,l.useState)(!1),z=(0,i.default)(D,2),A=z[0],L=z[1],N=(0,l.useState)(!1),_=(0,i.default)(N,2),M=_[0],J=_[1],V=(0,l.useState)(!1),U=(0,i.default)(V,2),Z=U[0],q=U[1],Q=(0,l.useState)(!1),X=(0,i.default)(Q,2),G=X[0],H=X[1],$=(0,l.useState)(20),K=(0,i.default)($,2),ee=K[0],te=K[1],re=n.params,ne=re.room,ie=re.host,le=re.name;(0,l.useEffect)((function(){ue("Eminem"),E.emit("audio_room"),E.on("audio_room",(function(e){q(!1),H(!0),te(e.time),se(e.audio),console.log(e.cheat)})),E.on("answer_room",(function(e){m(e.answer),u(e.players),L(!0),H(!1),setTimeout((function(){q(!0)}),5e3)})),E.on("next_room",(function(){ue("Eminem"),B(""),C(null),m(!1),L(!1),J(!1)})),E.on("results_room",(function(){t.navigate("results",{room:ne,name:le})}))}),[]);var se=function(){var e=(0,Y.default)((function*(e){(yield ye.getStatusAsync()).isLoaded&&(yield ye.stopAsync(),yield ye.unloadAsync()),yield ye.loadAsync({uri:e}),yield ye.playAsync()}));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=(0,Y.default)((function*(e){e&&(B(e),p(yield oe(e)))}));return function(t){return e.apply(this,arguments)}}();return(0,d.jsx)(T,{children:(0,d.jsxs)(x.default,{style:me.game,children:[Z&&(0,d.jsxs)(x.default,{style:me.ranking,children:[(0,d.jsx)(j.default,{style:me.player,children:le}),(0,d.jsx)(ce,{players:s,visible:Z}),ie&&(0,d.jsx)(W.default,{style:ge(ge({},P.button),{},{width:300,marginTop:10}),onPress:function(){E.emit("next_room",(function(){E.emit("audio_room")}))},children:(0,d.jsx)(j.default,{style:P.buttonText,children:"Suivant"})})]}),(0,d.jsxs)(x.default,{children:[(0,d.jsx)(x.default,{style:me.image,children:b?(0,d.jsx)(O.default,{style:me.imageResponse,source:{uri:b.image}}):(0,d.jsx)(x.default,{style:me.imageTextContainer,children:(0,d.jsx)(j.default,{style:me.imageText,children:(0,d.jsx)(he,{nbr:ee,play:G})})})}),b&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.default,{style:me.titleResponse,children:b.name}),(0,d.jsx)(j.default,{style:me.artistsResponse,children:b.artists.join(", ")})]})]}),A&&(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(x.default,{style:me.result,children:b?(0,d.jsxs)(x.default,{style:me.resultBox,children:[(0,d.jsx)(O.default,{style:me.resultImg,source:r(M?3484:9336)}),(0,d.jsx)(j.default,{style:me.resultText,children:M?"Correcte":"Incorrecte"})]}):(0,d.jsx)(j.default,{style:me.resultTitle,children:"En attente du r\xe9sultat"})}),F&&(0,d.jsxs)(x.default,{style:{marginTop:10,gap:10},children:[(0,d.jsx)(j.default,{style:me.resultTitle,children:"Votre r\xe9ponse"}),(0,d.jsx)(ae,{song:F})]})]}),!b&&!F&&(0,d.jsxs)(x.default,{style:me.search,children:[(0,d.jsx)(j.default,{style:me.searchTitle,children:"Trouve la musique"}),(0,d.jsx)(R.default,{style:[P.input,me.searchInput],value:I,onChangeText:ue,placeholder:"Rechercher une musique..."}),(0,d.jsx)(x.default,{style:ge(ge({},me.songContainer),{},{marginTop:h.length>0?10:0}),children:h.map((function(e){return(0,d.jsx)(ae,{song:e,answered:A,setAnswered:L,setMyAnswer:C,setCorrect:J},e.id)}))})]})]})})}var me=n.default.create({game:{display:"flex",flexDirection:"column",justifyContent:"space-around",alignItems:"center",height:"100%"},ranking:{position:"absolute",left:0,display:"flex",justifyContent:"space-around",flexDirection:"column",height:"100%",backgroundColor:"#000",zIndex:1e3},rankingButton:{position:"absolute",top:10,right:10,zIndex:1e4},rankingImage:{height:30,width:30,borderRadius:50,backgroundColor:"#333333",borderWidth:2,borderColor:"gold"},player:{fontWeight:"bold",color:"#FFFFFF",fontSize:30,width:300,textAlign:"center"},image:{height:300,width:300,borderRadius:10,marginLeft:"auto",marginRight:"auto",overflow:"hidden"},imageTextContainer:{height:300,width:300,display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"#333333"},imageText:{fontSize:50,color:"#CCC",fontWeight:"bold"},imageResponse:{width:300,height:300},search:{height:"auto",width:300,padding:5,display:"flex",flexDirection:"column",backgroundColor:"#111111",borderWidth:2,borderStyle:"solid",borderColor:"slateblue",borderRadius:6},searchTitle:{fontSize:20,fontWeight:"bold",color:"#FFFFFF",margin:5},searchInput:{width:285,textAlign:"left"},songContainer:{display:"flex",flexDirection:"column",gap:5},result:{height:100,width:300,display:"flex",alignItems:"center",justifyContent:"center"},resultTitle:{color:"#FFFFFF",fontWeight:"bold",fontSize:20},resultBox:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:5},resultImg:{height:60,width:60},resultText:{color:"#FFFFFF",fontSize:16,fontWeight:"bold"},titleResponse:{fontSize:20,fontWeight:"bold",color:"#FFFFFF",textAlign:"center"},artistsResponse:{fontSize:18,color:"#CCCCCC",marginBottom:10,textAlign:"center"}});function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function je(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?xe(Object(r),!0).forEach((function(t){(0,m.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oe(e){var t=e.route,r=(0,l.useState)([]),n=(0,i.default)(r,2),o=n[0],a=n[1],s=f().user,c=t.params,h=c.room,p=c.name;(0,l.useEffect)((function(){E.emit("players",{room:h}),E.on("players",(function(e){a(e.players),e.players.forEach((function(e){e.id==E.id&&g(e.point)}))}))}),[]);var g=function(e){u.auth.updateUser({data:{point:(null==s?void 0:s.user_metadata.point)+e}})};return(0,d.jsx)(T,{children:(0,d.jsxs)(x.default,{style:ve.ranking,children:[(0,d.jsx)(v.default,{to:"/home",children:(0,d.jsx)(x.default,{style:je(je({},P.button),{},{width:300}),children:(0,d.jsx)(j.default,{style:P.buttonText,children:"Accueil"})})}),o.length>0&&(0,d.jsx)(j.default,{style:ve.player,children:p}),(0,d.jsx)(x.default,{children:(0,d.jsx)(ce,{players:o,visible:!0})})]})})}var ve=n.default.create({ranking:{gap:10},player:{fontWeight:"bold",color:"#FFFFFF",fontSize:30,width:300,textAlign:"center"}});function we(e){var t=e.navigation,r=(0,l.useState)(""),n=(0,i.default)(r,2),o=n[0],a=n[1],s=(0,l.useState)(""),c=(0,i.default)(s,2),f=c[0],h=c[1],p=function(){var e=(0,Y.default)((function*(){(yield u.auth.signInWithPassword({email:o,password:f})).error?z.default.alert("Connexion \xe9chou\xe9e"):z.default.alert("Connexion r\xe9ussie"),t.navigate("home")}));return function(){return e.apply(this,arguments)}}();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.default,{style:Se.homeTitle,children:"Connexion"}),(0,d.jsxs)(x.default,{style:Se.fieldBox,children:[(0,d.jsx)(j.default,{style:Se.label,children:"Entrez votre E-Mail"}),(0,d.jsx)(R.default,{style:P.input,value:o,onChangeText:a,placeholder:"E-Mail",keyboardType:"email-address"})]}),(0,d.jsxs)(x.default,{style:Se.fieldBox,children:[(0,d.jsx)(j.default,{style:Se.label,children:"Entrez votre mot de passe"}),(0,d.jsx)(R.default,{style:P.input,value:f,onChangeText:h,placeholder:"Mot de passe",secureTextEntry:!0})]}),(0,d.jsx)(W.default,{style:P.button,onPress:p,children:(0,d.jsx)(j.default,{style:P.buttonText,children:"Se connecter"})})]})}function Fe(e){var t=e.navigation,r=(0,l.useState)(""),n=(0,i.default)(r,2),o=n[0],a=n[1],s=(0,l.useState)(""),c=(0,i.default)(s,2),f=c[0],h=c[1],p=(0,l.useState)(""),g=(0,i.default)(p,2),y=g[0],b=g[1],m=function(){var e=(0,Y.default)((function*(){f===y?((yield u.auth.signUp({email:o,password:f,options:{data:{point:0}}})).error?z.default.alert("Inscription \xe9chou\xe9e"):z.default.alert("Inscription r\xe9ussie"),t.navigate("home")):z.default.alert("Les mots de passe ne correspondent pas")}));return function(){return e.apply(this,arguments)}}();return(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(j.default,{style:Se.homeTitle,children:"Inscription"}),(0,d.jsxs)(x.default,{style:Se.fieldBox,children:[(0,d.jsx)(j.default,{style:Se.label,children:"Entrez un E-Mail"}),(0,d.jsx)(R.default,{style:P.input,value:o,onChangeText:a,placeholder:"E-Mail",keyboardType:"email-address"})]}),(0,d.jsxs)(x.default,{style:Se.fieldBox,children:[(0,d.jsx)(j.default,{style:Se.label,children:"Entrez un mot de passe"}),(0,d.jsx)(R.default,{style:P.input,value:f,onChangeText:h,placeholder:"Mot de passe",secureTextEntry:!0})]}),(0,d.jsxs)(x.default,{style:Se.fieldBox,children:[(0,d.jsx)(j.default,{style:Se.label,children:"Confirmez le mot de passe"}),(0,d.jsx)(R.default,{style:P.input,value:y,onChangeText:b,placeholder:"Confirmer",secureTextEntry:!0})]}),(0,d.jsx)(W.default,{style:P.button,onPress:m,children:(0,d.jsx)(j.default,{style:P.buttonText,children:"S'inscrire"})})]})}function Ce(e){var t=e.setPage;return(0,d.jsxs)(x.default,{style:Se.home,children:[(0,d.jsx)(O.default,{style:Se.homeImg,source:r(3350)}),(0,d.jsx)(j.default,{style:Se.homeTitle,children:"Connexion"}),(0,d.jsxs)(x.default,{style:Se.buttons,children:[(0,d.jsx)(W.default,{style:P.button,onPress:function(){return t("login")},children:(0,d.jsx)(j.default,{style:P.buttonText,children:"Connexion"})}),(0,d.jsx)(W.default,{style:P.button,onPress:function(){return t("register")},children:(0,d.jsx)(j.default,{style:P.buttonText,children:"Inscription"})})]})]})}function Te(e){var t=e.navigation,r=(0,l.useState)("home"),n=(0,i.default)(r,2),o=n[0],a=n[1];return(0,d.jsx)(T,{children:(0,d.jsxs)(x.default,{style:Se.form,children:["home"!==o&&(0,d.jsx)(W.default,{style:Se.back,onPress:function(){return a("home")},children:(0,d.jsx)(j.default,{style:Se.backText,children:(0,d.jsx)(b.default,{name:"chevron-left"})})}),"home"===o&&(0,d.jsx)(Ce,{setPage:a}),"login"===o&&(0,d.jsx)(we,{navigation:t}),"register"===o&&(0,d.jsx)(Fe,{navigation:t})]})})}var Se=n.default.create({home:{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column"},homeImg:{height:200,width:200},homeTitle:{width:300,fontSize:32,textTransform:"uppercase",fontWeight:"bold",textAlign:"center",color:"slateblue",marginBottom:10},buttons:{width:300,gap:10},form:{padding:10},fieldBox:{marginBottom:10},label:{color:"#FFFFFF",fontWeight:"bold",fontSize:20},back:{display:"flex",alignItems:"center",justifyContent:"center",width:30,height:30,borderStyle:"solid",borderWidth:1,borderRadius:6,borderColor:"#CCC",backgroundColor:"#111111",alignSelf:"flex-start",marginBottom:10},backText:{color:"#FFFFFF",fontSize:14}});function Pe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ke(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pe(Object(r),!0).forEach((function(t){(0,m.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pe(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Ie(){var e=f().user,t=function(){var e=(0,Y.default)((function*(){yield u.auth.signOut()}));return function(){return e.apply(this,arguments)}}();return(0,d.jsx)(T,{children:(0,d.jsxs)(x.default,{style:{gap:50},children:[(0,d.jsxs)(x.default,{style:{display:"flex",alignItems:"center",gap:10},children:[(0,d.jsx)(j.default,{style:ke(ke({},P.buttonText),{},{fontSize:30}),children:"Points"}),(0,d.jsx)(x.default,{style:Be.point,children:(0,d.jsx)(j.default,{style:Be.pointText,children:null==e?void 0:e.user_metadata.point})})]}),(0,d.jsxs)(x.default,{children:[(0,d.jsx)(j.default,{style:ke(ke({},P.buttonText),{},{textAlign:"left",padding:5}),children:"E-Mail"}),(0,d.jsx)(j.default,{style:P.input,children:null==e?void 0:e.email})]}),(0,d.jsx)(W.default,{onPress:t,style:ke(ke({},P.button),{},{width:300}),children:(0,d.jsx)(j.default,{style:P.buttonText,children:"D\xe9connexion"})})]})})}var Be=n.default.create({point:{padding:10,borderWidth:2,borderRadius:100,borderColor:"slateblue",height:200,width:200,display:"flex",alignItems:"center",justifyContent:"center"},pointText:{fontSize:100,fontWeight:"bold",color:"slateblue"}}),De=(0,y.default)(),Re=function(e,t){return{title:e,tabBarActiveTintColor:"slateblue",tabBarIcon:function(e){var r=e.color;return(0,d.jsx)(b.default,{name:t,color:r,size:20,solid:!0})},tabBarLabelStyle:{fontSize:12}}};function We(){var e=f().user;return(0,d.jsx)(p.default,{theme:g.default,children:(0,d.jsxs)(De.Navigator,{initialRouteName:"home",children:[(0,d.jsx)(De.Screen,{name:"home",component:B,options:Re("Accueil","home")}),(0,d.jsx)(De.Screen,{name:"join",component:Q,options:Re("Rejoindre","play")}),(0,d.jsx)(De.Screen,{name:"create",component:Z,options:Re("Cr\xe9er","pen")}),(0,d.jsx)(De.Screen,{name:"auth",component:e?Ie:Te,options:Re(e?"Profil":"Connexion","user")}),(0,d.jsx)(De.Screen,{name:"lobby",component:ee,options:{title:"Joueurs",tabBarButton:function(){return(0,d.jsx)(d.Fragment,{})}}}),(0,d.jsx)(De.Screen,{name:"game",component:be,options:{title:"Jeu",tabBarButton:function(){return(0,d.jsx)(d.Fragment,{})}}}),(0,d.jsx)(De.Screen,{name:"results",component:Oe,options:{title:"R\xe9sultats",tabBarButton:function(){return(0,d.jsx)(d.Fragment,{})}}})]})})}function ze(){return(0,d.jsx)(o.default,{style:Ee.body,children:(0,d.jsx)(h,{children:(0,d.jsx)(We,{})})})}var Ee=n.default.create({body:{minWidth:320,width:"100%",height:"100%"}})},3350:(e,t,r)=>{e.exports=r.p+"static/media/blindcontest.2af5bf59b9724617941a.png"},3484:(e,t,r)=>{e.exports=r.p+"static/media/correct.c4b264e4299eed714ed2.png"},9336:(e,t,r)=>{e.exports=r.p+"static/media/incorrect.a15ad18c2ec19f6d8893.png"}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.m=e,(()=>{var e=[];r.O=(t,n,o,i)=>{if(!n){var l=1/0;for(d=0;d<e.length;d++){for(var[n,o,i]=e[d],a=!0,s=0;s<n.length;s++)(!1&i||l>=i)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(a=!1,i<l&&(l=i));if(a){e.splice(d--,1);var u=o();void 0!==u&&(t=u)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,o,i]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={179:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var o,i,[l,a,s]=n,u=0;if(l.some((t=>0!==e[t]))){for(o in a)r.o(a,o)&&(r.m[o]=a[o]);if(s)var d=s(r)}for(t&&t(n);u<l.length;u++)i=l[u],r.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return r.O(d)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r.O(void 0,[557],(()=>r(6271)));n=r.O(n)})();
//# sourceMappingURL=main.b2a0e022.js.map